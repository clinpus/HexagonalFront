import './polyfills.server.mjs';
import{i as g}from"./chunk-36YYQ7CM.mjs";import{L as n,O as l,T as s,U as i,bc as o,g as a,gc as p,pa as c}from"./chunk-CRFK7ZGH.mjs";var u=class r{constructor(e){this.platformId=e;o(this.platformId)&&this.checkLoginStatus()}http=i(p);router=i(g);apiUrl="https://localhost:7147/api/auth/";TOKEN_KEY="auth_token";loggedInSubject=new a(!1);isLoggedIn$=this.loggedInSubject.asObservable();checkLoginStatus(){let t=!!this.getToken();this.loggedInSubject.next(t)}login(e){return this.http.post(this.apiUrl+"login",e).pipe(n(t=>{this.loggedInSubject.next(!0),localStorage.setItem(this.TOKEN_KEY,t.token)}))}logout(){this.loggedInSubject.next(!1),localStorage.removeItem(this.TOKEN_KEY),this.router.navigate(["/home"])}isAuthenticated(){return o(this.platformId)?!!localStorage.getItem(this.TOKEN_KEY):null}getToken(){return o(this.platformId)?localStorage.getItem(this.TOKEN_KEY):null}static \u0275fac=function(t){return new(t||r)(s(c))};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};export{u as a};
