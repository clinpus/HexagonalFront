import './polyfills.server.mjs';
import{a as A,b as k,c as w,d as N,e as j,f as B,g as R,h as V,i as L}from"./chunk-D6R5KRAD.mjs";import{$ as M,$a as e,Aa as r,Fa as d,Ka as f,O as h,Pa as D,Ub as P,Vb as F,Xa as p,Xb as u,Yb as I,Zb as x,_a as n,aa as S,ba as y,bb as O,db as g,eb as _,ib as t,jb as s,kb as c,mb as m,nb as T,ob as v}from"./chunk-CRFK7ZGH.mjs";import"./chunk-X2SEQXRR.mjs";var C=class o{constructor(a,i){this.dialogRef=a;this.data=i}onClose(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||o)(d(A),d(k))};static \u0275cmp=f({type:o,selectors:[["detail-invoice"]],decls:30,vars:12,consts:[["mat-dialog-title",""],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close"]],template:function(i,l){i&1&&(n(0,"h2",0),t(1),e(),n(2,"mat-dialog-content")(3,"p")(4,"strong"),t(5,"Client :"),e(),t(6),e(),n(7,"p")(8,"strong"),t(9,"Num\xE9ro :"),e(),t(10),e(),n(11,"p")(12,"strong"),t(13,"Date d'\xE9mission :"),e(),t(14),m(15,"date"),e(),n(16,"p")(17,"strong"),t(18,"Total TTC :"),e(),t(19),m(20,"currency"),e(),n(21,"p")(22,"strong"),t(23,"Etat :"),e(),t(24),e()(),n(25,"mat-dialog-actions",1)(26,"button",2),g("click",function(){return l.onClose()}),t(27,"Fermer"),e(),n(28,"button",3),t(29,"\xC9diter"),e()()),i&2&&(r(),c("D\xE9tails de la Facture #",l.data.id,""),r(5),c(" ",l.data.clientName,""),r(4),c(" ",l.data.numero,""),r(4),c(" ",T(15,7,l.data.dateEmission),""),r(5),c(" ",v(20,9,l.data.totalTTC,"EUR"),""),r(5),c(" ",l.data.etat,""),r(4),p("mat-dialog-close",!0))},dependencies:[x,I,u,B,R,V,N,j],encapsulation:2})};var E=class o extends L{getAllInvoices(){return this.get("invoices")}static \u0275fac=(()=>{let a;return function(l){return(a||(a=y(o)))(l||o)}})();static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})};function K(o,a){o&1&&(n(0,"p"),t(1," Aucune facture trouv\xE9e. Veuillez v\xE9rifier la connexion \xE0 l'API. "),e())}function Q(o,a){if(o&1){let i=O();n(0,"tr")(1,"td"),t(2),e(),n(3,"td"),t(4),e(),n(5,"td"),t(6),m(7,"date"),e(),n(8,"td"),t(9),m(10,"date"),e(),n(11,"td"),t(12),m(13,"currency"),e(),n(14,"td")(15,"button",5),g("click",function(){let b=M(i).$implicit,z=_(2);return S(z.viewDetails(b.id))}),t(16,"D\xE9tails"),e()()()}if(o&2){let i=a.$implicit;r(2),s(i.id),r(2),s(i.clientName),r(2),s(v(7,5,i.dateEmission,"shortDate")),r(3),s(v(10,8,i.dateEcheance,"shortDate")),r(3),s(v(13,11,i.totalTTC,"EUR"))}}function W(o,a){if(o&1&&(n(0,"table",3)(1,"thead")(2,"tr")(3,"th"),t(4,"ID"),e(),n(5,"th"),t(6,"Client"),e(),n(7,"th"),t(8,"Date d'\xC9mission"),e(),n(9,"th"),t(10,"\xC9ch\xE9ance"),e(),n(11,"th"),t(12,"Total TTC"),e(),n(13,"th"),t(14,"Actions"),e()()(),n(15,"tbody"),D(16,Q,17,14,"tr",4),e()()),o&2){let i=_();r(16),p("ngForOf",i.invoices)}}var $=class o{constructor(a,i){this.invoiceService=a;this.dialog=i}invoices=[];ngOnInit(){this.invoiceService.getAllInvoices().subscribe({next:a=>{this.invoices=a||[]},error:a=>{console.error("Erreur lors du chargement des factures:",a)}})}viewDetails(a){let i=this.invoices.find(l=>l.id===a);i&&this.dialog.open(C,{width:"600px",data:i})}static \u0275fac=function(i){return new(i||o)(d(E),d(w))};static \u0275cmp=f({type:o,selectors:[["app-invoice"]],decls:5,vars:2,consts:[[1,"container"],[4,"ngIf"],["class","invoice-table",4,"ngIf"],[1,"invoice-table"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(i,l){i&1&&(n(0,"div",0)(1,"h2"),t(2,"Liste des Factures"),e(),D(3,K,2,0,"p",1)(4,W,17,1,"table",2),e()),i&2&&(r(3),p("ngIf",l.invoices.length===0),r(),p("ngIf",l.invoices.length>0))},dependencies:[x,P,F,I,u],styles:[".container[_ngcontent-%COMP%]{padding:20px}.invoice-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}.invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .invoice-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.invoice-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.invoice-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}button[_ngcontent-%COMP%]{padding:5px 10px;cursor:pointer}"]})};export{$ as InvoiceComponent};
